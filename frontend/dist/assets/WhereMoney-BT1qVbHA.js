import{R as c,u as D,c as A,r as f,j as e,L as m,d as o}from"./index-DEJYXl90.js";const S=()=>{const[x,r]=c.useState(0),[n,d]=c.useState(!1),s=D(),[i,a]=c.useState(!1),[h,l]=c.useState(!1),g=A(),u=new URLSearchParams(g.search).get("status"),j=async()=>{try{const t=await o.get("style/info");return{status:t.status,data:t.data}}catch(t){return t.response?{status:t.response.status}:(console.log("Unexpected error:",t),{status:500})}},b=async()=>{try{return(await o.get("payment/link")).data}catch(t){return console.log(t),{status:":("}}},N=async()=>{try{const{response:t}=await o.post("payment/notify");return t}catch(t){console.log(t)}},w=async()=>{try{const t=await o.get("payment/info");return{status:t.status,data:t.data}}catch(t){return t.response?{status:t.response.status}:(console.log("Unexpected error:",t),{status:500})}},y=async()=>{a(!0);const t=await j();t.status===403?r(1):t.status===404||t.status===200?s(m):r(0),a(!1)},v=async()=>{const t=await b();t&&t.link?window.location.href=t.link:l(!0)},C=async()=>{if(u==="ok"){a(!0);const t=await N();if(!t||t.status!==200){a(!1),r(1),l(!0);return}let k=0;const B=100,p=setInterval(async()=>{(await w()).status===200&&(clearInterval(p),s(m)),++k>B&&(clearInterval(p),a(!1),l(!0))},5e3)}else a(!1),r(1),l(!0)};return f.useEffect(()=>{y()},[]),f.useEffect(()=>{(u==="ok"||u==="fail")&&C()},[]),e.jsxs("div",{className:"w-full h-screen relative",children:[e.jsx("img",{src:"/photos/LK/WomanLK.png",alt:"",className:"absolute top-0 left-0 w-full h-full object-cover"}),e.jsx("div",{className:"absolute inset-0 bg-white opacity-70"}),i&&e.jsxs("div",{className:"absolute w-full top-[30%] flex flex-col gap-5 items-center justify-center",children:[e.jsx("img",{src:"/photos/LK/Krutilcka.svg",alt:"",className:"w-48"}),e.jsxs("p",{className:"text-center text-[#1B3C4D] font-light font-montserrat text-[14px] uppercase",children:["еще пару мгновений,",e.jsx("br",{}),"проверяем оплату..."]})]}),x===0&&!i&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsxs("div",{className:"flex flex-col items-center justify-end lg:gap-6 gap-3 text-[#1B3C4D] lg:h-[75%] h-[60%] max-w-md px-6 w-full",children:[e.jsx("button",{className:"w-full bg-[#1B3C4D] py-5 rounded-2xl",onClick:()=>s("/login"),children:e.jsx("p",{className:"uppercase font-unbounded font-light text-[14px] text-white",children:"Войти"})}),e.jsx("button",{className:"w-full py-5 rounded-2xl border border-[#1B3C4D]",onClick:()=>s("/register"),children:e.jsx("p",{className:"uppercase font-unbounded font-light text-[14px] text-[#1B3C4D]",children:"Зарегистрироваться"})}),e.jsx("div",{className:"w-full flex justify-center mt-7",children:e.jsx("img",{src:"/photos/Auth/Register/cross-svgrepo-com.svg",className:"w-8 cursor-pointer",alt:"",onClick:()=>s("/")})})]})}),x===1&&!i&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsxs("div",{className:"flex flex-col items-center justify-between lg:gap-6 gap-3 text-[#1B3C4D] lg:h-[75%] h-[60%] max-w-md px-6 w-full relative",children:[e.jsxs("p",{className:"text-[25px] font-unbounded lg:font-medium font-thin lg:text-left text-center uppercase w-full",children:["оплатите доступ ",e.jsx("br",{})," к сервису"]}),e.jsxs("p",{className:"text-[15px] font-montserrat lg:font-medium lg:block hidden font-normal uppercase lg:text-left text-center w-full",children:["наш AI проанализирует черты лица ",e.jsx("br",{}),"и определит типаж"]}),e.jsxs("p",{className:"text-[12px] font-montserrat lg:font-medium lg:hidden font-normal uppercase lg:text-left text-center w-full",children:["наш ",e.jsx("span",{className:"font-medium",children:"AI"})," проанализирует черты лица ",e.jsx("br",{}),"и определит типаж"]}),e.jsx("div",{className:"border-x border-[#1B3C4D] lg:block hidden rounded-2xl p-3 text-center w-full",children:e.jsxs("p",{className:"uppercase text-[15px] text-[#1B3C4D]",children:["В подарок ты получишь мини-гайд ",e.jsx("br",{}),"о своем типаже"]})}),e.jsx("div",{className:"border-x border-[#1B3C4D] lg:hidden rounded-2xl p-3 text-center w-full",children:e.jsxs("p",{className:"uppercase font-normal text-[12px] text-[#1B3C4D]",children:[e.jsx("span",{className:"font-medium",children:"В подарок "})," ты получишь мини-гайд ",e.jsx("br",{}),"о своем типаже"]})}),e.jsx("p",{className:"text-[#1B3C4D] font-medium text-[30px] font-unbounded",children:"3990 ₽"}),e.jsxs("div",{className:"flex items-start gap-3 w-full",children:[e.jsx("img",{className:`w-5 cursor-pointer ${n?"hidden":"block"}`,src:"/photos/Auth/Register/Checkbox.svg",alt:"",onClick:()=>d(!n)}),e.jsx("img",{className:`w-5 cursor-pointer ${n?"block":"hidden"}`,src:"/photos/Auth/Register/CheckboxActive.svg",alt:"",onClick:()=>d(!n)}),e.jsxs("a",{className:"font-montserrat text-[10px] font-normal text-[#1B3C4D] uppercase leading-tight cursor-pointer",href:"https://mneidet.com/privacy/",children:["Я согласен с условиями ",e.jsx("br",{className:"lg:block hidden"}),"лицензионного ",e.jsx("br",{className:"lg:hidden"})," соглашения"]})]}),e.jsxs("div",{className:"w-full relative",children:[e.jsx("button",{className:"w-full bg-[#1B3C4D] py-5 rounded-2xl disabled:opacity-50",disabled:!n,onClick:()=>v(),children:e.jsx("p",{className:"uppercase font-unbounded font-light text-[14px] text-white",children:"продолжить"})}),h&&e.jsx("p",{className:"absolute text-center w-full mt-5 text-red-500 uppercase text-[14px] font-medium",children:"ошибка оплаты"})]}),e.jsx("div",{className:"text-center"}),e.jsx("div",{className:"w-full hidden lg:flex justify-center mt-7",children:e.jsx("img",{src:"/photos/Auth/Register/cross-svgrepo-com.svg",className:"w-8 cursor-pointer",alt:"",onClick:()=>s("/")})})]})})]})};export{S as default};
