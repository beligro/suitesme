import{u as P,r as l,j as e,$ as v}from"./index-DEJYXl90.js";const $=()=>{const t=P(),[c,m]=l.useState(0),[i,b]=l.useState({email:""}),[u,y]=l.useState({}),[k,f]=l.useState(!1),[n,h]=l.useState(40),d=l.useRef(null),[C,S]=l.useState(""),[a,w]=l.useState({password:"",password_confirm:""}),[x,A]=l.useState({}),[E,j]=l.useState(!1),_=()=>{const s={};return i.email?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(i.email)||(s.email="Некорректный email"):s.email="Email обязателен",s},g=(s=40)=>{clearInterval(d.current),h(s),d.current=setInterval(()=>{h(r=>r<=1?(clearInterval(d.current),0):r-1)},1e3)};l.useEffect(()=>(c===1&&g(40),()=>clearInterval(d.current)),[c]),l.useEffect(()=>{const r=new URLSearchParams(window.location.search).get("token");r&&(S(r),m(2))},[]);const N=async()=>{var r,o;const s=_();if(y(s),!Object.keys(s).length)try{f(!0),await v.post("/auth/forgot_password",{email:i.email}),m(1)}catch(p){alert(((o=(r=p.response)==null?void 0:r.data)==null?void 0:o.message)??"Ошибка отправки письма")}finally{f(!1)}},B=()=>{const s={};return a.password||(s.password="Пароль обязателен"),a.password_confirm||(s.password_confirm="Подтвердите пароль"),a.password&&a.password!==a.password_confirm&&(s.password_confirm="Пароли не совпадают"),s},D=async()=>{var r,o;const s=B();if(A(s),!Object.keys(s).length)try{j(!0),await v.post("/auth/password/reset",{password:a.password,password_confirm:a.password_confirm,reset_token:C}),m(3)}catch(p){alert(((o=(r=p.response)==null?void 0:r.data)==null?void 0:o.message)??"Ошибка смены пароля")}finally{j(!1)}};return e.jsxs("div",{children:[c===0&&e.jsx("form",{onSubmit:async s=>{s.preventDefault(),await N()},className:"w-full min-h-screen flex justify-center items-center",children:e.jsx("div",{className:"sm:w-[400px] w-full sm:p-0 p-5 h-[780px]",children:e.jsxs("div",{className:"w-full h-full flex flex-col justify-between gap-10",children:[e.jsxs("div",{className:"w-full flex flex-col gap-10 relative",children:[e.jsxs("div",{className:"md:hidden flex flex-row items-center justify-between w-full",children:[e.jsx("img",{src:"/photos/Auth/Back.svg",alt:"",className:"cursor-pointer w-10",onClick:()=>{t(-1)}}),e.jsx("img",{src:"/photos/Auth/Star.svg",alt:"",className:"w-10"})]}),e.jsx("img",{className:"md:block hidden absolute -left-20 cursor-pointer",src:"/photos/Auth/Back.svg",alt:"",onClick:()=>{t(-1)}}),e.jsx("p",{className:"font-unbounded text-left md:uppercase font-medium text-[20px]",children:"забыли пароль?"}),e.jsx("p",{className:"uppercase text-[10px] font-medium font-montserrat w-full text-[#607E96]",children:"не волнуйтесь! такое случается. Пожалуйста, введите адрес электронной почты , связанный с вашей учетной записью."}),e.jsxs("div",{className:"w-full flex flex-col gap-2",children:[e.jsx("p",{className:"uppercase font-montserrat text-[12px] font-medium text-[#1B3C4D]",children:"email"}),e.jsx("input",{name:"email",value:i.email,onChange:s=>b({...i,[s.target.name]:s.target.value}),className:"border-b px-3 py-2 rounded-2xl"}),u.email&&e.jsx("p",{className:"text-red-500 text-xs",children:u.email})]})]}),e.jsxs("div",{className:"w-full flex flex-col gap-10",children:[e.jsx("button",{className:"w-full bg-[#1B3C4D] py-5 rounded-2xl mb-32",disabled:k,children:e.jsx("p",{className:"uppercase font-unbounded font-light text-white",children:"отправить"})}),e.jsxs("div",{className:"text-center uppercase font-montserrat text-[#8296A6] text-[12px]",children:["ЕЩЕ НЕТ аккаунтА? ",e.jsx("span",{className:"cursor-pointer text-black",onClick:()=>{t("/register")},children:" ЗАРЕГИСТРИРОВАТЬСЯ"})," "]}),e.jsx("div",{className:"w-full hidden justify-center sm:flex",children:e.jsx("img",{src:"/photos/Auth/Register/cross-svgrepo-com.svg",className:"w-8 cursor-pointer",alt:"",onClick:()=>{t("/")}})})]})]})})}),c===1&&e.jsx("div",{className:"w-full min-h-screen flex justify-center items-center",children:e.jsx("div",{className:"sm:w-[400px] w-full sm:p-0 p-5 h-[780px]",children:e.jsxs("div",{className:"w-full h-full flex flex-col justify-between gap-10",children:[e.jsxs("div",{className:"w-full flex flex-col gap-5 justify-center items-center mt-14",children:[e.jsx("img",{src:"/photos/Auth/Star.svg",alt:"",className:"w-10 mb-5"}),e.jsx("p",{className:"uppercase font-medium font-unbounded text-center text-[#1B3C4D]",children:"ссылка для восстановления пароля отправлена на почту"}),e.jsx("p",{className:"text-[#607E96] text-[10px] uppercase",children:"проверьте спам, если ссылки нет"})]}),e.jsxs("div",{className:"w-full flex flex-col gap-10",children:[e.jsx("p",{className:`text-center mb-20 font-montserrat ${n===0?"cursor-pointer text-blue-500":"text-gray-400 cursor-not-allowed"}`,onClick:async()=>{n===0&&(await N(),g(40))},children:n===0?"отправить ссылку повторно":`отправить ссылку повторно через 00:${n<10?`0${n}`:n}`}),e.jsxs("div",{className:"text-center uppercase font-montserrat text-[#8296A6] text-[12px]",children:["ЕЩЕ НЕТ аккаунтА? ",e.jsx("span",{className:"cursor-pointer text-black",onClick:()=>{t("/register")},children:" ЗАРЕГИСТРИРОВАТЬСЯ"})," "]}),e.jsx("div",{className:"w-full hidden justify-center sm:flex",children:e.jsx("img",{src:"/photos/Auth/Register/cross-svgrepo-com.svg",className:"w-8 cursor-pointer",alt:"",onClick:()=>{t("/")}})})]})]})})}),c===2&&e.jsx("div",{className:"w-full min-h-screen flex justify-center items-center",children:e.jsx("div",{className:"sm:w-[400px] w-full sm:p-0 p-5 h-[780px]",children:e.jsxs("div",{className:"w-full h-full flex flex-col justify-between gap-10",children:[e.jsxs("div",{className:"w-full flex flex-col gap-10 relative",children:[e.jsxs("div",{className:"md:hidden flex flex-row items-center justify-between w-full",children:[e.jsx("img",{src:"/photos/Auth/Back.svg",alt:"",className:"cursor-pointer w-10",onClick:()=>{t(-1)}}),e.jsx("img",{src:"/photos/Auth/Star.svg",alt:"",className:"w-10"})]}),e.jsx("img",{className:"md:block hidden absolute -left-20 cursor-pointer",src:"/photos/Auth/Back.svg",alt:"",onClick:()=>{t(-1)}}),e.jsx("p",{className:"font-unbounded text-left md:uppercase font-medium text-[20px]",children:"введите новый пароль"}),e.jsx("p",{className:"uppercase text-[10px] font-medium font-montserrat w-full text-[#607E96]",children:"пожалуйста, придумайте сложный пароль"}),e.jsxs("div",{className:"w-full flex flex-col gap-2",children:[e.jsx("p",{className:"uppercase font-montserrat text-[12px] font-medium text-[#1B3C4D]",children:"пароль"}),e.jsx("input",{name:"password",type:"password",value:a.password,onChange:s=>w({...a,[s.target.name]:s.target.value}),className:"border-b px-3 py-2 rounded-2xl"}),x.password&&e.jsx("p",{className:"text-red-500 text-xs",children:x.password})]}),e.jsxs("div",{className:"w-full flex flex-col gap-2",children:[e.jsx("p",{className:"uppercase font-montserrat text-[12px] font-medium text-[#1B3C4D]",children:"подтвердить пароль"}),e.jsx("input",{name:"password_confirm",type:"password",value:a.password_confirm,onChange:s=>w({...a,[s.target.name]:s.target.value}),className:"border-b px-3 py-2 rounded-2xl"}),x.password_confirm&&e.jsx("p",{className:"text-red-500 text-xs",children:x.password_confirm})]})]}),e.jsxs("div",{className:"w-full flex flex-col gap-10",children:[e.jsx("button",{className:"w-full bg-[#1B3C4D] py-5 rounded-2xl mb-32",onClick:D,disabled:E,children:e.jsx("p",{className:"uppercase font-unbounded font-light text-white",children:"отправить"})}),e.jsxs("div",{className:"text-center uppercase font-montserrat text-[#8296A6] text-[12px]",children:["ЕЩЕ НЕТ аккаунтА? ",e.jsx("span",{className:"cursor-pointer text-black",onClick:()=>{t("/register")},children:" ЗАРЕГИСТРИРОВАТЬСЯ"})," "]}),e.jsx("div",{className:"w-full hidden justify-center sm:flex",children:e.jsx("img",{src:"/photos/Auth/Register/cross-svgrepo-com.svg",className:"w-8 cursor-pointer",alt:"",onClick:()=>{t("/")}})})]})]})})}),c===3&&e.jsx("div",{className:"w-full min-h-screen flex justify-center items-center",children:e.jsx("div",{className:"sm:w-[400px] w-full sm:p-0 p-5 h-[780px]",children:e.jsxs("div",{className:"w-full h-full flex flex-col justify-between gap-10",children:[e.jsxs("div",{className:"w-full flex flex-col gap-5 justify-center items-center mt-14",children:[e.jsx("img",{src:"/photos/Auth/Star.svg",alt:"",className:"w-10 mb-5"}),e.jsx("p",{className:"uppercase font-medium font-unbounded text-[#1B3C4D]",children:"пароль изменен"}),e.jsx("p",{className:"text-[#607E96] text-[10px] uppercase",children:"ваш пароль был успешно изменен"})]}),e.jsxs("div",{className:"w-full flex flex-col gap-10",children:[e.jsx("button",{className:"w-full bg-[#1B3C4D] py-5 rounded-2xl mb-32",onClick:()=>{t("/")},children:e.jsx("p",{className:"uppercase font-unbounded font-light text-white",children:"Вернуться ко входу"})}),e.jsxs("div",{className:"text-center uppercase font-montserrat text-[#8296A6] text-[12px]",children:["ЕЩЕ НЕТ аккаунтА? ",e.jsx("span",{className:"cursor-pointer text-black",onClick:()=>{t("/register")},children:" ЗАРЕГИСТРИРОВАТЬСЯ"})," "]}),e.jsx("div",{className:"w-full hidden justify-center sm:flex",children:e.jsx("img",{src:"/photos/Auth/Register/cross-svgrepo-com.svg",className:"w-8 cursor-pointer",alt:"",onClick:()=>{t("/")}})})]})]})})})]})};export{$ as default};
