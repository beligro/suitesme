import React, { useState } from 'react';
import { ChevronDown, ChevronUp } from 'lucide-react';
import SectionWrapper from "../../../hoc/SectionWrapper.jsx";

const renderAnswer = (answer) => {
    if (typeof answer === 'string') {
        return answer;
    }
    if (Array.isArray(answer)) {
        return (
            <div className="flex flex-col gap-3">
                {answer.map((part, i) => {
                    if (typeof part === 'string') {
                        return <p key={i}>{part}</p>;
                    }
                    if (part?.list) {
                        return (
                            <ul key={i} className="list-disc list-inside space-y-1 pl-1">
                                {part.list.map((item, j) => (
                                    <li key={j}>{item}</li>
                                ))}
                            </ul>
                        );
                    }
                    return null;
                })}
            </div>
        );
    }
    return null;
};

const faqItems = [
    {
        question: 'КАКИЕ ФОТОГРАФИИ НУЖНО ПОДГРУЖАТЬ?',
        answer: [
            'Чтобы ИИ корректно определил ваш типаж, важно загрузить фотографии в ракурсе анфас, на которых хорошо видны ваши природные черты лица.',
            'Самый подходящий формат — фото как на паспорт или документы: прямой ракурс, нейтральное выражение лица, естественный свет. Также можно загрузить селфи, если они соответствуют указанным требованиям.',
            'Вы можете загрузить до 4 фотографий — это помогает системе точнее определить типаж.',
            'Требования к фотографиям:',
            {
                list: [
                    'ракурс анфас',
                    'естественный дневной свет',
                    'лицо смотрит прямо в камеру',
                    'нейтральное выражение лица',
                    'волосы убраны от лица',
                    'лицо полностью открыто',
                ],
            },
        ],
    },
    {
        question: 'КАК AI ОПРЕДЕЛЯЕТ ТИПАЖ, И МОГУ ЛИ Я ДОВЕРЯТЬ РЕЗУЛЬТАТАМ?',
        answer: [
            'AI MNE IDET определяет типаж на основе анализа визуальных характеристик лица — пропорций, линий, контрастности и сочетания черт. Модель обучена на базе системы MNE IDET и опыта типирования за последние 7 лет, поэтому опирается на закономерности системы, а не на тренды или стандарты красоты.',
            'AI не оценивает внешность, а помогает определить природные особенности и задать направление для работы с имиджем. Модель показывает высокий уровень точности, при этом мы продолжаем её обучать и дополнительно проверяем результаты. Если типирование требует корректировки, мы связываемся с вами и обновляем результат.',
        ],
    },
    {
        question: 'ЧТО ВХОДИТ В ФАЙЛ С ОПИСАНИЕМ ТИПАЖА?',
        answer: [
            'После типирования вы получаете файл с подробным описанием вашего типажа. Внутри разбор особенностей типажа, его ДНК, подходящие стилистические направления, силуэты, текстуры, примеры образов и типичные имиджевые ошибки.',
            'Файл описывает сам типаж и его закономерности, а не является индивидуальным разбором внешности. Его задача — познакомить вас с особенностями типажа и дать понятное направление для самостоятельной работы с имиджем.',
        ],
    },
    {
        question: 'МОЖНО ЛИ ОПЛАЧИВАТЬ ЗАРУБЕЖНОЙ КАРТОЙ?',
        answer: 'Да, доступна оплата любой картой. Но если вы столкнулись с трудностями при оплате, пожалуйста, свяжитесь со службой поддержки: support@mne-idet.ru',
    },
    {
        question: 'ЧТО ДЕЛАТЬ, ЕСЛИ РЕЗУЛЬТАТ ТИПИРОВАНИЯ ВЫЗЫВАЕТ СОМНЕНИЯ?',
        answer: 'В системе MNE IDET возможны пограничные типажи. Если результат требует уточнения, команда дополнительно проверяет типирование и при необходимости корректирует его.',
    },
    {
        question: 'ЗАМЕНЯЕТ ЛИ AI-ТИПИРОВАНИЕ ИМИДЖБУК ИЛИ ПРОХОЖДЕНИЕ ИНТЕНСИВА MNE IDET 2.0?',
        answer: [
            'Нет. AI-типирование — это точка входа в систему MNE IDET.',
            'Оно помогает определить ваш типаж и понять направление работы с имиджем, но не заменяет глубокую стилистическую проработку.',
            'Имиджбук и обучение — это следующий уровень работы, где типаж переводится в конкретные решения для вашей жизни: гардероб, сочетания вещей, стилистические приёмы и персональную стратегию образа.',
            'AI-типирование даёт основу и понимание себя. Имиджбук и курс помогают эту основу реализовать на практике.',
        ],
    },
    {
        question: 'КОГДА Я ПОЛУЧУ РЕЗУЛЬТАТ?',
        answer: [
            'Результат типирования формируется практически мгновенно — в течение нескольких секунд после загрузки фотографий.',
            'После обработки данных вы сразу получаете доступ к файлу с описанием вашего типажа.',
        ],
    },
    {
        question: 'ЧТО ПРОИСХОДИТ С МОИМИ ФОТОГРАФИЯМИ?',
        answer: [
            'Загруженные фотографии используются исключительно для проведения AI-типирования в системе MNE IDET.',
            'Фотографии:',
            {
                list: [
                    'не публикуются',
                    'не используются в маркетинговых материалах',
                    'не передаются третьим лицам',
                    'не применяются для иных целей, кроме определения типажа',
                ],
            },
            'Обработка изображений происходит автоматически внутри системы и необходима только для анализа визуальных характеристик лица.',
            'Мы внимательно относимся к конфиденциальности и безопасности ваших данных.',
        ],
    },
];

const Questions = () => {
    const [openIndex, setOpenIndex] = useState(null);

    const toggle = (index) => {
        setOpenIndex(openIndex === index ? null : index);
    };

    return (
        <div className="w-full flex justify-center mt-32 ">
            <div className="lg:w-[1000px] w-full lg:bg-[#F7F7F7] bg-[#C2CED8] lg:rounded-none rounded-t-2xl lg:p-0 px-5 py-7 flex flex-col gap-5">
                <p className="lg:text-[25px] text-[20px] font-unbounded lg:text-left text-center font-medium text-[#1B3C4D] lg:pt-0 pt-12">Ответы на вопросы</p>

                <div className="w-full">
                    {faqItems.map((item, index) => (
                        <div key={index} className="border-b-[1px] w-full lg:border-gray-300 border-gray-400 lg:py-8 py-10">
                            <button
                                onClick={() => toggle(index)}
                                className="flex justify-between items-center w-full text-left text-[#1B3C4D] lg:font-medium font-light text-[16px]"
                            >
                                <span className="max-w-[90%] font-montserrat font-light">{item.question}</span>
                                {openIndex === index ? <ChevronUp size={26} /> : <ChevronDown size={26} />}
                            </button>
                            {openIndex === index && (
                                <div className="mt-6 text-[#1B3C4D] text-[15px] font-montserrat font-light">{renderAnswer(item.answer)}</div>
                            )}

                        </div>
                    ))}
                </div>
                <div className="lg:hidden block h-12 bg-[#C2CED8]"></div>
            </div>
        </div>
    );
};

export default SectionWrapper(Questions , 'questions');