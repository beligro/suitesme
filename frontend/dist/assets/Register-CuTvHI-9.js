import{a as C,s as _,r as o,u as S,P as A,j as e,V as L,$ as B}from"./index-DEJYXl90.js";const R=()=>{const u=C(_),[p,w]=o.useState(!1),[x,g]=o.useState(!1),[c,h]=o.useState(!1),[j,f]=o.useState(!1),[l,v]=o.useState({}),[t,b]=o.useState({first_name:"",last_name:"",birth_date:"",email:"",password:"",password_confirm:""}),n=S(),m=s=>{const{name:a,value:i}=s.target;b(d=>({...d,[a]:i}))},N=()=>{const s={};return t.first_name||(s.first_name="Имя обязательно"),t.last_name||(s.last_name="Фамилия обязательна"),t.birth_date||(s.birth_date="Дата рождения обязательна"),t.email?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t.email)||(s.email="Некорректный формат email"):s.email="Email обязателен",t.password||(s.password="Пароль обязателен"),t.password!==t.password_confirm&&(s.password_confirm="Пароли не совпадают"),s},k=async s=>(await B.post("/auth/register",s)).data,y=async s=>{var i,d;s.preventDefault();const a=N();if(v(a),!(Object.keys(a).length>0)){f(!0);try{const r=await k(t);localStorage.setItem("userId",String(r.user_id)),localStorage.setItem("infoToResent",JSON.stringify(t)),n(L)}catch(r){console.error("Ошибка регистрации:",r),(d=(i=r==null?void 0:r.response)==null?void 0:i.data)!=null&&d.message&&alert(r.response.data.message)}finally{f(!1)}}};return o.useEffect(()=>{u&&n(A,{replace:!0})},[u]),e.jsx("form",{className:"w-full min-h-screen flex justify-center items-center",onSubmit:y,children:e.jsx("div",{className:"w-[400px] md:h-[780px] h-[800px] sm:p-0 p-5",children:e.jsxs("div",{className:"w-full flex flex-col gap-10 relative",children:[e.jsxs("div",{className:"md:hidden flex flex-row items-center justify-between w-full",children:[e.jsx("img",{src:"/photos/Auth/Back.svg",alt:"",className:"cursor-pointer",onClick:()=>{n(-1)}}),e.jsx("img",{src:"/photos/Auth/Star.svg",alt:""})]}),e.jsx("img",{className:"md:block hidden absolute -left-20 cursor-pointer",src:"/photos/Auth/Back.svg",alt:"",onClick:()=>{n(-1)}}),e.jsx("p",{className:"font-unbounded text-left sm:uppercase font-medium text-[20px]",children:"создать аккаунт"}),e.jsxs("div",{className:"w-full flex flex-col gap-2",children:[[{label:"имя",name:"first_name"},{label:"фамилия",name:"last_name"},{label:"дата рождения",name:"birth_date",type:"date"},{label:"email",name:"email",type:"email"}].map(({label:s,name:a,type:i="text"})=>e.jsxs("div",{className:"w-full flex flex-col gap-1",children:[e.jsx("p",{className:"uppercase font-montserrat text-[12px] font-medium text-[#1B3C4D]",children:s}),e.jsx("input",{type:i,name:a,value:t[a],onChange:m,className:"border-b px-3 py-2 rounded-2xl"}),l[a]&&e.jsx("p",{className:"text-red-500 text-xs",children:l[a]})]},a)),e.jsxs("div",{className:"w-full flex flex-col gap-1",children:[e.jsx("p",{className:"uppercase font-montserrat text-[12px] font-medium text-[#1B3C4D]",children:"пароль"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:p?"text":"password",name:"password",value:t.password,onChange:m,className:"border-b px-3 py-2 rounded-2xl w-full pr-10"}),e.jsx("button",{type:"button",onClick:()=>w(!p),className:"absolute right-2 top-1/2 -translate-y-1/2 text-gray-500",children:p?e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.477 0 8.268 2.943 9.542 7-1.274 4.057-5.065 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]}):e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.477 0-8.268-2.943-9.542-7a10.05 10.05 0 012.266-3.592m2.732-1.846A9.96 9.96 0 0112 5c4.477 0 8.268 2.943 9.542 7a9.96 9.96 0 01-1.065 2.1M15 12a3 3 0 11-6 0 3 3 0 016 0zM3 3l18 18"})})})]}),l.password&&e.jsx("p",{className:"text-red-500 text-xs",children:l.password})]}),e.jsxs("div",{className:"w-full flex flex-col gap-1",children:[e.jsx("p",{className:"uppercase font-montserrat text-[12px] font-medium text-[#1B3C4D]",children:"подтвердите пароль"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:x?"text":"password",name:"password_confirm",value:t.password_confirm,onChange:m,className:"border-b px-3 py-2 rounded-2xl w-full pr-10"}),e.jsx("button",{type:"button",onClick:()=>g(!x),className:"absolute right-2 top-1/2 -translate-y-1/2 text-gray-500",children:x?e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.477 0 8.268 2.943 9.542 7-1.274 4.057-5.065 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]}):e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.477 0-8.268-2.943-9.542-7a10.05 10.05 0 012.266-3.592m2.732-1.846A9.96 9.96 0 0112 5c4.477 0 8.268 2.943 9.542 7a9.96 9.96 0 01-1.065 2.1M15 12a3 3 0 11-6 0 3 3 0 016 0zM3 3l18 18"})})})]}),l.password_confirm&&e.jsx("p",{className:"text-red-500 text-xs",children:l.password_confirm})]})]}),e.jsxs("div",{className:"w-full flex flex-row justify-start items-start gap-3",children:[e.jsx("img",{className:`${c?"hidden":"block"} w-5 cursor-pointer`,src:"/photos/Auth/Register/Checkbox.svg",alt:"",onClick:()=>h(!c)}),e.jsx("img",{className:`${c?"block":"hidden"} w-5 cursor-pointer`,src:"/photos/Auth/Register/CheckboxActive.svg",alt:"",onClick:()=>h(!c)}),e.jsxs("p",{className:"font-montserrat text-[10px] font-normal text-[#1B3C4D] uppercase",children:["Я принимаю условия и политику ",e.jsx("br",{}),"конфиденциальности"]})]}),e.jsx("button",{type:"submit",className:"w-full bg-[#1B3C4D] py-5 rounded-2xl disabled:opacity-50",disabled:j||!c,children:e.jsx("p",{className:"uppercase font-unbounded font-light text-white",children:"зарегистрироваться"})}),e.jsxs("div",{className:"text-center uppercase font-montserrat text-[#8296A6] text-[12px]",children:["уже есть аккаунт? ",e.jsx("span",{className:"cursor-pointer text-black",onClick:()=>{n("/login")},children:"Войти"})," "]}),e.jsx("div",{className:"w-full hidden justify-center sm:flex",children:e.jsx("img",{src:"/photos/Auth/Register/cross-svgrepo-com.svg",className:"w-8 cursor-pointer",alt:"",onClick:()=>{n("/")}})})]})})})};export{R as default};
